## Intro

특정 Bean 정의에서 생성된 개체에 연결할 다양한 의존성 및 구성 값 뿐만 아니라 특정 bean 정의에서 생성된 개체의 범위도 제어할 수 있다.

## 빈 스코프(Bean Scope)

빈 스코프는 빈이 존재할 수 있는 범위를 뜻한다.

스프링에서는 싱글톤(Singletone)과 프로토타입(Prototype) 빈 스코프,

스프링 MVC 웹 애플리케이션에서의 웹 관련 스코프를 제공하고 있다.

**빈 스코프의 종류**

- 싱글톤(Singleton) : 기본 스코프(Default), 스프링 컨테이너에서 한 번만 생성되며 컨테이너가 사라질 때 제거되는 가장 넓은 범위의 스코프이다.
- 프토로타입(prototype) : DI가 발생할 때마다 새로운 객체가 생성되어 의존관계 주입까지만 관여하고 더는 관리하지 않는 짧은 범위의 스코프이다.
- 웹 관련 스코프
    - request : 웹 요청이 들어오고 나갈때 까지 유지되는 스코프이다.
    - session : 웹 세션이 생서오디고 종료될 때 까지 유지되는 스코프이다.
    - application : 웹의 서블릿 컨텍스트와 같은 범위로 유지되는 스코프이다.
    - websocket : 웹 소켓과 동일한 범위로 유지되는 스코프이다.

**빈 스코프 설정하기**

컴포넌트 스캔을 사용할 경우

```java
@Scope("prototype")
@Component
public class BeanOne {}
```

수동으로 등록헀을 경우

```java
@Scope("prototype")
@Bean
public class BeanTwo {
	return new BeanTwo();
}
```

## **싱글톤(Singleton)**

![빈 스코프.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ac8af829-0654-4101-a37f-50d4c3a09de9/%EB%B9%88_%EC%8A%A4%EC%BD%94%ED%94%84.png)

싱글톤은 클래스의 인스턴스가 1개만 생성되는 것을 보장하는 디자인 패턴이다.

싱글톤 빈은 대상 클래스에 @Scope 또는 @Scope(”singleton”)을 붙여 사용한다.

생성된 인스턴스는 싱글톤 빈의 캐시에 저장되며, 참조 또는 요청시 캐시된 개체를 반환한다.

스프링 컨테이너의 시작과 함께 생성되어 종료될 때 까지 유지된다.

싱글톤 빈의 하나의 공유 인스턴스만 관리하게 되며, 동일 참조를 보장한다.

싱글톤 빈을 사용할 때는 private 생성자를 사용하여 외부에서 임의로 new를 사용하지 못하도록 막아야 한다.

싱글톤으로 적합한 객체

1. 상태가 없는 공유 객체
2. 읽기 전용 상태의 객체
3. 쓰기가 가능한 상태를 지니면서도 사용 빈도가 매우 높은 객체 (동기화 전략 필요)

## **프로토타입(Prototype)**

![빈 스코프2.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d3ba9f24-3e91-4dbe-a8c7-965cc6b54b96/%EB%B9%88_%EC%8A%A4%EC%BD%94%ED%94%842.png)

프로토 타입은 기존 인스턴스를 복제하여 새로운 인스턴스를 만드는 디자인 패턴이다.

프로토타입 빈은 대상 클래스에 @Scope(”prototype”)을 붙여 사용한다.

DI가 발생할 때마다 새로운 객체가 생성되어 의존관계 주입까지만 관여하고 더는 관리하지 않는 짧은 범위의 스코프이다.

빈 소멸에 대해 스프링 컨테이너는 관여하지 않으며, Garbage Collector에 의해 제거된다.

프로토타입으로 적합한 객체

1. 사용할때마다 상태가 달라져야 하는 객체
2. 쓰기가 가능한 상태가 있는 객체